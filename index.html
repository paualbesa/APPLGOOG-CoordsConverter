<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apple ‚Üî Google Maps Converter</title>

<style>
:root {
  --accent: #ff8a1f;
  --bg: #f6f7f9;
  --card: #ffffff;
  --text: #1e1e1e;
  --muted: #6b7280;
  --border: #e5e7eb;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card {
  width: 100%;
  max-width: 720px;
  background: var(--card);
  border-radius: 16px;
  padding: 28px;
  box-shadow: 0 10px 30px rgba(0,0,0,.08);
  border: 1px solid var(--border);
}

.logo-link {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 1000;
}

.logo {
  height: 96px;
  display: block;
}


h1 {
  margin: 0 0 10px;
  font-size: 26px;
}

p {
  margin: 0 0 20px;
  color: var(--muted);
}

textarea {
  width: 100%;
  min-height: 90px;
  resize: vertical;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 14px;
  font-size: 15px;
  background: #fafafa;
  color: var(--text);
}

textarea:focus {
  outline: none;
  border-color: var(--accent);
}

.buttons {
  display: flex;
  gap: 12px;
  margin-top: 16px;
  flex-wrap: wrap;
}

button {
  flex: 1;
  border: none;
  border-radius: 12px;
  padding: 12px 16px;
  font-size: 15px;
  cursor: pointer;
  background: var(--accent);
  color: #fff;
  font-weight: 600;
}

button.secondary {
  background: #f3f4f6;
  color: var(--text);
}

.result {
  margin-top: 22px;
  padding: 16px;
  border-radius: 12px;
  background: #fafafa;
  border: 1px solid var(--border);
}

.result a {
  color: var(--accent);
  word-break: break-all;
}

.error {
  color: #dc2626;
}

.footer {
  margin-top: 18px;
  font-size: 13px;
  color: var(--muted);
  text-align: center;
}
</style>
</head>

<body>
  <a href="https://albesatechsolutions.es" class="logo-link">
  <img src="ats.png" alt="Logo" class="logo">
</a>

<div class="card">
  
  <h1>Convertidor Apple ‚Üî Google Maps</h1>
  <p>Pega cualquier enlace real de Maps. Detectamos la coordenada correcta y generamos el otro enlace.</p>

  <textarea id="input" placeholder="Pega aqu√≠ una URL de Apple Maps o Google Maps"></textarea>

  <div class="buttons">
    <button onclick="convertir()">Convertir</button>
    <button class="secondary" onclick="copiar()">Copiar enlace</button>
  </div>

  <div id="output" class="result"></div>
</div>

<script>
let lastResult = "";

function convertir() {
  const input = document.getElementById("input").value.trim();
  const out = document.getElementById("output");
  out.innerHTML = "";
  lastResult = "";

  try {
    if (!input) throw "Pega una URL primero";

    const url = new URL(input);
    const host = url.host.toLowerCase();

    const coords = extraerCoordenadas(url, input);
    if (!coords) throw "No se han encontrado coordenadas en la URL";

    const { lat, lon } = coords;

    let resultURL;

    if (host.includes("google")) {
      resultURL = `https://maps.apple.com/?ll=${lat},${lon}&q=${lat},${lon}`;
      out.innerHTML = `üçé Apple Maps<br><a href="${resultURL}" target="_blank">${resultURL}</a>`;
    }
    else if (host.includes("apple")) {
      resultURL = `https://www.google.com/maps?q=${lat},${lon}`;
      out.innerHTML = `üåê Google Maps<br><a href="${resultURL}" target="_blank">${resultURL}</a>`;
    }
    else {
      throw "La URL no parece de Apple Maps ni Google Maps";
    }

    lastResult = resultURL;
  }
  catch (e) {
    out.innerHTML = `<span class="error">‚ö†Ô∏è ${e}</span>`;
  }
}

function copiar() {
  if (!lastResult) return;
  navigator.clipboard.writeText(lastResult);
}

function extraerCoordenadas(url, raw) {

  // 1Ô∏è‚É£ Google chincheta real !3dLAT!4dLON
  const bang = raw.match(/!3d(-?\d+(\.\d+)?)!4d(-?\d+(\.\d+)?)/);
  if (bang) return { lat: bang[1], lon: bang[3] };

  // 2Ô∏è‚É£ Apple Maps coordinate=lat,lon
  const coordinate = url.searchParams.get("coordinate");
  if (coordinate && coordinate.includes(",")) {
    const [lat, lon] = coordinate.split(",");
    return { lat, lon };
  }

  // 3Ô∏è‚É£ q=lat,lon
  const q = url.searchParams.get("q");
  if (q && q.includes(",")) {
    const [lat, lon] = q.split(",");
    return { lat, lon };
  }

  // 4Ô∏è‚É£ ll=lat,lon
  const ll = url.searchParams.get("ll");
  if (ll && ll.includes(",")) {
    const [lat, lon] = ll.split(",");
    return { lat, lon };
  }

  // 5Ô∏è‚É£ @lat,lon (vista)
  const at = raw.match(/@(-?\d+(\.\d+)?),(-?\d+(\.\d+)?)/);
  if (at) return { lat: at[1], lon: at[3] };

  return null;
}
</script>
</body>
</html>

